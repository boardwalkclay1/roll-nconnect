<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Find Spots ‚Äî Roll ‚Äôn Connect</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="rc_global.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

  <style>
    body {
      background: #000;
      color: #fff;
      margin: 0;
      padding: 0;
      font-family: 'Inter', sans-serif;
      overflow-x: hidden;
    }

    /* Space FX */
    .stars1, .stars2, .stars3 {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0; left: 0;
      pointer-events: none;
      z-index: -1;
    }

    #map {
      width: 100%;
      height: 70vh;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 0 40px rgba(0,0,0,0.6);
    }

    /* Floating Bubble Nav */
    .bubble-nav {
      position: fixed;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 18px;
      z-index: 50;
    }

    .bubble {
      width: 55px;
      height: 55px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #4fc3f7, #1a237e);
      box-shadow: 0 0 20px rgba(79,195,247,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: 0.25s ease;
      border: 1px solid rgba(255,255,255,0.25);
      font-size: 22px;
    }

    .bubble:hover {
      transform: scale(1.15);
      box-shadow: 0 0 30px rgba(79,195,247,1);
    }

    /* Dropdown */
    .glass-select {
      padding: 12px 16px;
      border-radius: 12px;
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.25);
      color: #fff;
      font-size: 15px;
      cursor: pointer;
      outline: none;
      backdrop-filter: blur(10px);
      transition: 0.25s ease;
    }

    .glass-select:hover {
      background: rgba(255,255,255,0.18);
    }

    /* Use My Location Button */
    .location-btn {
      padding: 12px 18px;
      border-radius: 12px;
      background: linear-gradient(135deg, #4fc3f7, #1a237e);
      border: none;
      color: #fff;
      cursor: pointer;
      font-size: 15px;
      box-shadow: 0 0 20px rgba(79,195,247,0.6);
      transition: 0.25s ease;
    }

    .location-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px rgba(79,195,247,1);
    }
  </style>
</head>

<body>

<!-- Space Background -->
<div class="stars1"></div>
<div class="stars2"></div>
<div class="stars3"></div>

<!-- Floating Bubble Navigation -->
<div class="bubble-nav">
  <div class="bubble" onclick="location.href='index.html'">üè†</div>
  <div class="bubble" onclick="location.href='events.html'">üéâ</div>
  <div class="bubble" onclick="location.href='marketplace.html'">üõí</div>
  <div class="bubble" onclick="location.href='chatrooms.html'">üí¨</div>
  <div class="bubble" onclick="location.href='profile.html'">üë§</div>
</div>

<!-- Sidebar + Hamburger -->
<div class="hamburger" id="hamburger">
  <span></span><span></span><span></span>
</div>

<div class="sidebar" id="sidebar">
  <h2>Menu</h2>
  <a href="index.html">Home</a>
  <a href="find-spots.html" class="active">Find Spots</a>
  <a href="events.html">Events</a>
  <a href="marketplace.html">Marketplace</a>
  <a href="chatrooms.html">Messages</a>
  <a href="profile.html">Your Profile</a>
</div>

<!-- Main Wrapper -->
<div class="wrapper" style="padding:24px;">

  <!-- Header -->
  <div class="glass" style="padding:24px;margin-bottom:16px;">
    <h1 class="section-title">Find Spots</h1>
    <p style="opacity:0.8;">
      Trails, plazas, garages, parks, skateparks, water, and more ‚Äî powered by OSM + your own national database.
    </p>

    <!-- Filters + Location -->
    <div style="margin-top:16px;display:flex;gap:12px;flex-wrap:wrap;align-items:center;">
      <select id="spotFilterSelect" class="glass-select">
        <option value="all">All</option>
        <option value="trail">Trails</option>
        <option value="plaza">Plazas</option>
        <option value="garage">Garages</option>
        <option value="park">Parks</option>
        <option value="skatepark">Skateparks</option>
        <option value="rink">Rinks</option>
        <option value="water">Water</option>
        <option value="parking">Parking</option>
        <option value="college">Colleges</option>
        <option value="hospital">Hospitals</option>
      </select>

      <button id="btnUseLocation" class="location-btn">üìç Use My Location</button>
    </div>
  </div>

  <!-- Map Container -->
  <div class="glass" style="padding:0;">
    <div id="map"></div>
  </div>

</div>

<!-- Scripts -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="rc_core.js"></script>
<script src="js/rc_map.js"></script>

<script>
  // Sidebar toggle
  document.getElementById("hamburger").onclick = () => {
    document.getElementById("hamburger").classList.toggle("active");
    document.getElementById("sidebar").classList.toggle("open");
  };

  // Map filter + location logic
  document.addEventListener("DOMContentLoaded", () => {
    const filterSelect = document.getElementById("spotFilterSelect");
    const btnUseLocation = document.getElementById("btnUseLocation");

    // Real API call to RC_MAP
    filterSelect.onchange = () => {
      RC_MAP.setFilter(filterSelect.value);
    };

    btnUseLocation.onclick = () => {
      if (!navigator.geolocation) {
        alert("Location not supported.");
        return;
      }
      navigator.geolocation.getCurrentPosition(pos => {
        const lat = pos.coords.latitude;
        const lng = pos.coords.longitude;
        RC_MAP.setCenter(lat, lng, 13);
        RC_MAP.highlightNearbySpots(lat, lng);
      }, () => {
        alert("Unable to get your location.");
      });
    };
  });
</script>

</body>
</html>
