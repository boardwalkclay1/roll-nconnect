<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Find Spots — Roll ’n Connect</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="rc_global.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <style>
    #map {
      width: 100%;
      height: 70vh;
      border-radius: 16px;
      overflow: hidden;
    }
  </style>
</head>
<body>

<!-- Background FX -->
<div class="stars1"></div>
<div class="stars2"></div>
<div class="stars3"></div>

<!-- Sidebar + Hamburger -->
<div class="hamburger" id="hamburger">
  <span></span><span></span><span></span>
</div>

<div class="sidebar" id="sidebar">
  <h2>Menu</h2>
  <a href="index.html">Home</a>
  <a href="find-spots.html" class="active">Find Spots</a>
  <a href="events.html">Events</a>
  <a href="marketplace.html">Marketplace</a>
  <a href="chatrooms.html">Messages</a>
  <a href="profile.html">Your Profile</a>
</div>

<!-- Main Wrapper -->
<div class="wrapper" style="padding:24px;">

  <!-- Header -->
  <div class="glass" style="padding:24px;margin-bottom:16px;">
    <h1 class="section-title">Find Spots</h1>
    <p style="opacity:0.8;">
      Trails, plazas, garages, parks, skateparks, water, and more — powered by OSM + your own national database.
    </p>

    <!-- Filters + Location -->
    <div style="margin-top:16px;display:flex;gap:8px;flex-wrap:wrap;align-items:center;">
      <select id="spotFilterSelect" class="glass-input">
        <option value="all">All</option>
        <option value="trail">Trails</option>
        <option value="plaza">Plazas</option>
        <option value="garage">Garages</option>
        <option value="park">Parks</option>
        <option value="skatepark">Skateparks</option>
        <option value="rink">Rinks</option>
        <option value="water">Water</option>
        <option value="parking">Parking</option>
        <option value="college">Colleges</option>
        <option value="hospital">Hospitals</option>
      </select>

      <button id="btnUseLocation" class="btn-secondary">Use My Location</button>
    </div>
  </div>

  <!-- Map Container -->
  <div class="glass" style="padding:0;">
    <div id="map"></div>
  </div>

</div>

<!-- Scripts -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="rc_core.js"></script>

<!-- IMPORTANT: unified map engine -->
<script src="js/rc_map.js"></script>

<script>
  // Sidebar toggle
  document.getElementById("hamburger").onclick = () => {
    document.getElementById("hamburger").classList.toggle("active");
    document.getElementById("sidebar").classList.toggle("open");
  };

  // Map filter + location logic
  document.addEventListener("DOMContentLoaded", () => {
    const filterSelect = document.getElementById("spotFilterSelect");
    const btnUseLocation = document.getElementById("btnUseLocation");

    filterSelect.onchange = () => {
      RC_MAP.setFilter(filterSelect.value);
    };

    btnUseLocation.onclick = () => {
      if (!navigator.geolocation) {
        alert("Location not supported.");
        return;
      }
      navigator.geolocation.getCurrentPosition(pos => {
        const lat = pos.coords.latitude;
        const lng = pos.coords.longitude;
        RC_MAP.setCenter(lat, lng, 13);
        RC_MAP.highlightNearbySpots(lat, lng);
      }, () => {
        alert("Unable to get your location.");
      });
    };
  });
</script>

</body>
</html>
