<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Profile — Roll ’n Connect</title>
  <link rel="stylesheet" href="rc_global.css">
</head>
<body>
  <div class="stars1"></div>
  <div class="stars2"></div>
  <div class="stars3"></div>

  <div class="glass" style="max-width:900px;margin:80px auto;">
    <h1 class="section-title">Edit Profile</h1>

    <form id="profileForm" style="display:flex;flex-direction:column;gap:18px;max-width:600px;">
      <div>
        <label>Name</label><br>
        <input type="text" id="nameInput" style="width:100%;padding:10px;border-radius:10px;border:none;background:rgba(255,255,255,0.15);color:#fff;">
      </div>

      <div>
        <label>City</label><br>
        <input type="text" id="cityInput" style="width:100%;padding:10px;border-radius:10px;border:none;background:rgba(255,255,255,0.15);color:#fff;">
      </div>

      <div>
        <label>Discipline</label><br>
        <input type="text" id="disciplineInput" style="width:100%;padding:10px;border-radius:10px;border:none;background:rgba(255,255,255,0.15);color:#fff;">
      </div>

      <div>
        <label>Bio</label><br>
        <textarea id="bioInput" rows="4" style="width:100%;padding:10px;border-radius:10px;border:none;background:rgba(255,255,255,0.15);color:#fff;"></textarea>
      </div>

      <div>
        <label>Avatar Image</label><br>
        <input type="file" id="avatarInput" accept="image/*" style="margin-top:6px;">
      </div>

      <div style="margin-top:20px;">
        <button type="submit" class="btn-primary">Save Profile</button>
        <a href="profile.html" class="btn-primary" style="margin-left:10px;">Cancel</a>
      </div>
    </form>
  </div>

  <script src="rc_core.js"></script>
  <script>
    const form = document.getElementById("profileForm");
    const nameInput = document.getElementById("nameInput");
    const cityInput = document.getElementById("cityInput");
    const disciplineInput = document.getElementById("disciplineInput");
    const bioInput = document.getElementById("bioInput");
    const avatarInput = document.getElementById("avatarInput");

    let currentProfile = RC.getProfile();

    function loadProfile() {
      nameInput.value = currentProfile.name || "";
      cityInput.value = currentProfile.city || "";
      disciplineInput.value = currentProfile.discipline || "";
      bioInput.value = currentProfile.bio || "";
    }

    avatarInput.addEventListener("change", function () {
      const file = avatarInput.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (e) {
        currentProfile.avatarDataUrl = e.target.result;
      };
      reader.readAsDataURL(file);
    });

    form.addEventListener("submit", function (e) {
      e.preventDefault();
      currentProfile.name = nameInput.value.trim();
      currentProfile.city = cityInput.value.trim();
      currentProfile.discipline = disciplineInput.value.trim();
      currentProfile.bio = bioInput.value.trim();
      RC.saveProfile(currentProfile);
      window.location.href = "profile.html";
    });

    loadProfile();
  </script>
</body>
</html>
