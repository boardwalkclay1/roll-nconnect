<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Marketplace Item — Roll ’n Connect</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="rc_style.css">
</head>

<body>

  <!-- STARFIELD -->
  <div class="stars1"></div>
  <div class="stars2"></div>
  <div class="stars3"></div>

  <!-- LOADING -->
  <div class="rc-loading-overlay" id="loadingScreen">
    <div class="rc-loading-track">
      <div class="rc-longboard"></div>
      <div class="rc-rollerskate"></div>
    </div>
    <div class="rc-loading-text">Loading Item…</div>
  </div>

  <!-- HAMBURGER -->
  <div class="hamburger" id="hamburger">
    <span></span><span></span><span></span>
  </div>

  <!-- SIDEBAR -->
  <div class="sidebar" id="sidebar">
    <h2>Menu</h2>
    <a href="index.html">Home</a>
    <a href="dashboard.html">Dashboard</a>
    <a href="notifications.html">Notifications</a>
    <a href="events.html">Events</a>
    <a href="find-spots.html">Find Spots</a>
    <a href="chatrooms.html">Chatrooms</a>
    <a href="profile.html">Your Profile</a>
    <a href="profile-edit.html">Edit Profile</a>
  </div>

  <!-- MAIN -->
  <div class="wrapper">

    <div class="glass" style="padding:40px;">
      <div id="itemContainer"></div>
    </div>

  </div>

  <script src="rc_core.js"></script>

  <script>
    /* LOADING */
    window.addEventListener("load", () => {
      setTimeout(() => {
        const ls = document.getElementById("loadingScreen");
        ls.style.opacity = "0";
        setTimeout(() => ls.remove(), 600);
      }, 600);
    });

    /* SIDEBAR */
    document.getElementById("hamburger").onclick = () => {
      document.getElementById("hamburger").classList.toggle("active");
      document.getElementById("sidebar").classList.toggle("open");
    };

    /* ITEM RENDER */
    function renderItem() {
      const params = new URLSearchParams(window.location.search);
      const id = params.get("id");
      const items = RC.getMarketplaceItems();
      const item = items.find(i => i.id === id);

      const el = document.getElementById("itemContainer");

      if (!item) {
        el.innerHTML = "<p style='opacity:0.7;'>Item not found.</p>";
        return;
      }

      el.innerHTML = `
        <div style="display:flex;gap:24px;flex-wrap:wrap;">
          <div style="flex:1;min-width:260px;">
            <div style="width:100%;height:260px;border-radius:14px;overflow:hidden;background:rgba(255,255,255,0.1);margin-bottom:20px;">
              ${item.imageDataUrl ? `<img src="${item.imageDataUrl}" style="width:100%;height:100%;object-fit:cover;">` : ""}
            </div>
          </div>

          <div style="flex:2;min-width:260px;">
            <h1 class="section-title">${item.title}</h1>
            <p style="opacity:0.8;">${item.discipline || "Unlabeled"}</p>
            <p style="font-size:1.4rem;margin:10px 0;">$${item.price}</p>

            ${item.donateToGiveaway ? `<span class="tag-pill tag-green">Donated to Giveaway</span><br><br>` : ""}

            <p style="opacity:0.8;margin-bottom:20px;">${item.description || ""}</p>

            <a href="chatrooms.html" class="btn-primary">Contact Seller</a>
          </div>
        </div>
      `;
    }

    renderItem();
  </script>

</body>
</html>
